<header class="harmonic-head" id="banner">
  <div class="container">
    <h1>Spectrum Video Servers</h1>
    <p class="lead">It's a simple AngularJS CRUD application</p>
    <p>
      <a href="">
        <img class="img-responsive" src="" alt="">
      </a>
    </p>
  </div>
</header>
<div class="container">
  <div class="row">
    <div class="col-sm-6 col-sm-offset-3">
      <button type="button" class="btn btn-primary btn-block" ng-click="main.handleCreate()">Create</button>
      <button type="button" class="btn btn-primary btn-block" ng-click="main.getInitialValues()">Restart</button>
      <br/>
      <div>
        <label>Choose version:  <select ng-model="main.filterValue" ng-options="version for version in main.getUsedVersion()"></select></label>
      </div>
      <br/>
    </div>
  </div>
</div>
<div id="servers-list" class="container">
  <div id="list-header" class="row">
    <div class="col-xs-1 text-center">#</div>
    <div class="col-xs-2 text-center">ip</div>
    <div class="col-xs-2 text-center">name</div>
    <div class="col-xs-3 text-center">current version</div>
    <div class="col-xs-4 text-center">actions</div>
  </div>
  <div id="list-new-item" ng-if="main.modeStates.isCreate" class="row">
    <div class="col-xs-1"></div>
    <div class="col-xs-2 text-center">
      <input type="text" ng-model="main.newItem.ip" placeholder="xx.xx.xxx.xxx" ng-focus="main.modeStates.isCreate">
    </div>
    <div class="col-xs-2 text-center">
      <input type="text" ng-model="main.newItem.name" placeholder="name" ng-required>
    </div>
    <div class="col-xs-3 text-center">
      <input type="text" ng-model="main.newItem.currentVersion" placeholder="xxx.xx.xx.xx">
    </div>
    <div class="col-xs-4">
      <button type="button" class="btn btn-primary" ng-click="main.createItem(main.newItem)">Create</button>
      <button type="button" class="btn btn-warning" ng-click="main.cancelCreating()">Cancel</button>
    </div>
  </div>
  <div id="list-body" ng-repeat="server in main.servers | versionFilter : main.filterValue">
    <div ng-if="!main.modeStates.isEdit[$index]" class="row">
      <div class="col-xs-1 text-center">{{$index+1}}</div>
      <div class="col-xs-2 text-center">{{server.ip}}</div>
      <div class="col-xs-2 text-center">{{server.name}}</div>
      <div class="col-xs-3 text-center">{{server.currentVersion}}</div>
      <div class="col-xs-4">
        <button ng-if="!main.modeStates.isUpdate[$index]" type="button" class="btn btn-primary" ng-click="main.handleEdit(server, $index)">Edit</button>

        <button ng-if="!main.modeStates.isUpdate[$index]" type="button" class="btn btn-danger" ng-click="main.deleteItem(server, $index)">Delete</button>
        <hm-update-version on-update="main.updateField(server, 'currentVersion', value)"
                           versions="main.versions"
                           change-parent-state="main.handleUpdate(server, $index)"

                           <!--select-mode="angular.isDefined(main.modeStates.isUpdate[$index])"-->
        >

        </hm-update-version>
      </div>
    </div>
    <div ng-if="main.modeStates.isEdit[$index]" class="row">
      <div class="col-xs-1 text-center">{{$index+1}}</div>
      <div class="col-xs-2 text-center">
        <input type="text" ng-model="server.ip">
      </div>
      <div class="col-xs-2 text-center">
        <input type="text" ng-model="server.name">
      </div>
      <div class="col-xs-3 text-center">
        <input type="text" ng-model="server.currentVersion">
      </div>
      <div class="col-xs-4">
        <button type="button" class="btn btn-success" ng-click="main.saveEdit(server, $index)">Save</button>
        <button type="button" class="btn btn-warning" ng-click="main.resetEdit(server, $index)">Reset</button>
        <button type="button" class="btn btn-danger" ng-click="main.deleteItem(server, $index)">Delete</button>
      </div>
    </div>

  </div>
</div>
